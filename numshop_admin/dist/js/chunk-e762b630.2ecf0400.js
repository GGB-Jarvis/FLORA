(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e762b630"],{"236e":function(t,e,a){"use strict";var o=a("ac08"),i=a.n(o);i.a},6320:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:t.onAdd}},[t._v("新增\n\t")]),a("el-table",{attrs:{data:t.pageInfo.rows,border:"","highlight-current-row":""}},[a("el-table-column",{attrs:{prop:"id",label:"ID"}}),a("el-table-column",{staticStyle:{overflow:"hidden",height:"300px"},attrs:{prop:"content",label:"内容"}}),a("el-table-column",{attrs:{prop:"types",label:"协议类型"}}),a("el-table-column",{attrs:{prop:"createtime",label:"创建时间"}}),a("el-table-column",{attrs:{prop:"updatetime",label:"更新时间"}}),a("el-table-column",{scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return t.onTableUpdate(e.row)}}},[t._v("修改")]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return t.onTableDelete(e.row)}}},[t._v("删除")])]}}])})],1),a("el-pagination",{staticStyle:{"margin-top":"5px"},attrs:{background:"","current-page":t.searchFormData.pageIndex,"page-size":t.searchFormData.pageSize,"page-sizes":[5,10,20,40],total:t.pageInfo.total,layout:"total, sizes, prev, pager, next"},on:{"size-change":t.onSizeChange,"current-change":t.onPageIndexChange}}),a("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogVisible=e},close:function(e){return t.resetForm("dialogForm")}}},[a("el-form",{ref:"dialogForm",attrs:{rules:t.dialogFormRules,model:t.dialogFormData,"label-width":"120px",size:"mini"}},[a("el-form-item",{attrs:{prop:"content",label:"内容"}},[a("quill-editor",{ref:"myQuillEditor",staticClass:"editor",staticStyle:{"background-color":"black"},attrs:{options:t.editorOption},on:{focus:function(e){return t.quillEditorFocus(e)}},model:{value:t.dialogFormData.content,callback:function(e){t.$set(t.dialogFormData,"content",e)},expression:"dialogFormData.content"}}),a("el-upload",{staticClass:"avatar-uploader-img",attrs:{action:"http://artvery.txwsyun.cn:8080/numshop/upload","show-file-list":!1,"on-success":t.uploadImgSuccess,"before-upload":t.beforeUploadImg,"on-error":t.uploadImgError,data:{pathName:""}}})],1),a("el-form-item",{attrs:{prop:"types",label:"协议类型"}},[a("el-radio-group",{model:{value:t.dialogFormData.types,callback:function(e){t.$set(t.dialogFormData,"types",e)},expression:"dialogFormData.types"}},[a("el-radio-button",{attrs:{label:"用户协议"}}),a("el-radio-button",{attrs:{label:"隐私政策"}})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.onDialogSave}},[t._v("保 存")])],1)],1)],1)},i=[],l=[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image"]],r={data:function(){return{editorOption:{theme:"snow",placeholder:"请输入详情内容...",modules:{toolbar:{container:l,handlers:{image:function(t){t?document.querySelector(".avatar-uploader-img input").click():this.quill.format("image",!1)},link:function(t){if(t){var e=prompt("请输入链接地址：");this.quill.format("link",e)}else this.quill.format("link",!1)}}}}},searchFormData:{id:"",content:"",types:"",createtime:"",updatetime:"",pageIndex:1,pageSize:10},pageInfo:{rows:[],total:0},dialogVisible:!1,dialogTitle:"",dialogFormData:{id:"",content:"",types:"",createtime:"",updatetime:""},dialogFormRules:{id:[{required:!0,message:"不能为空",trigger:"blur"}],content:[{required:!0,message:"不能为空",trigger:"blur"}],types:[{required:!0,message:"不能为空",trigger:"blur"}],createtime:[{required:!0,message:"不能为空",trigger:"blur"}],updatetime:[{required:!0,message:"不能为空",trigger:"blur"}]}}},created:function(){this.loadTable()},methods:{beforeUploadImg:function(t){var e="image/jpeg"===t.type||"image/png"===t.type||"image/gif"===t.type;return e?this.quillUpdate=!0:this.$message.error("上传图片只能是 JPG，PNG, GIF 格式!"),e},uploadImgSuccess:function(t,e){var a=this.$refs.myQuillEditor.quill;if(t){console.info(t);var o=a.getSelection().index;a.insertEmbed(o,"image",t),a.setSelection(o+1)}else this.$message.error(t.msg);this.quillUpdate=!1},uploadImgError:function(){this.quillUpdate=!1,this.$message.error("图片插入失败!")},quillEditorFocus:function(t){},handleAvatarSuccess:function(t,e){this.imageUrl=URL.createObjectURL(e.raw),this.dialogFormData.imageurl=t},handleAvatarSuccess2:function(t,e){this.imageUrl=URL.createObjectURL(e.raw),this.dialogFormData.otherurl=t},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type,a=t.size/1024/1024<50;return a||this.$message.error("上传头像图片大小不能超过 50MB!"),e&&a},loadTable:function(){var t=this;this.$http.post("/protocol/list",this.searchFormData).then(function(e){t.pageInfo.rows=e}),this.$http.post("/protocol/total",this.searchFormData).then(function(e){t.pageInfo.total=e})},onTableUpdate:function(t){var e=this;this.dialogTitle="修改",this.dialogVisible=!0,this.$nextTick(function(){Object.assign(e.dialogFormData,t)})},onTableDelete:function(t){var e=this;this.$confirm("确认要删除该记录吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a={id:t.id};e.$http.post("/protocol/del",a).then(function(){e.$alert("删除成功"),e.loadTable()})})},onDialogSave:function(){var t=this;this.$refs.dialogForm.validate(function(e){if(e){var a=t.dialogFormData.id?"/protocol/update":"/protocol/add";t.$http.post(a,t.dialogFormData).then(function(){t.dialogVisible=!1,t.loadTable()})}})},onSizeChange:function(t){this.searchFormData.pageSize=t,this.loadTable()},onAdd:function(){this.dialogTitle="新增",this.dialogVisible=!0,this.dialogFormData.id=0},onPageIndexChange:function(t){this.searchFormData.pageIndex=t,this.loadTable()}}},n=r,s=(a("236e"),a("2877")),c=Object(s["a"])(n,o,i,!1,null,null,null);e["default"]=c.exports},ac08:function(t,e,a){}}]);
//# sourceMappingURL=chunk-e762b630.2ecf0400.js.map